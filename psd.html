<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>PSD Viewer</title>
</head>
<body>
  <canvas id="image-canvas"></canvas>

  <!-- Load the ag-psd library -->
  <script src="https://unpkg.com/ag-psd"></script>

  <script>
    // Get the PSD URL from the URL query string parameter 'psdUrl'
    const urlParams = new URLSearchParams(window.location.search);
    const psdUrl = urlParams.get('psdUrl');

    // Load the PSD file from the URL and display its image
    if (psdUrl) {
      const xhr = new XMLHttpRequest();
      xhr.open('GET', psdUrl, true);
      xhr.responseType = 'arraybuffer';
      xhr.addEventListener('load', function () {
        const buffer = xhr.response;
        const psd = ag-psd.readPsd(buffer);

        const canvas = document.getElementById('image-canvas');
        canvas.width = psd.children[0].width;
        canvas.height = psd.children[0].height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(psd.children[0].canvas, 0, 0);
      }, false);
      xhr.send();
    }
  </script>
</body>
</html>
